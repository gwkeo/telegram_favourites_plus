# telegram_favourites_plus
Бот позволяет сортировать отправленные ему сообщения по их типу (текст, кружочек и т.д.) с помощью пересылки их в специализированные ветки.

## Добавление бота в форум
Для начала работы необходимо добавить бота в форум и выдать ему права на редактирование тем. Бот автоматически создаст необходимые ветки, после чего остается только закрепить ветку "мусорка", предназначенную для отправки сообщений, которые следует отсортировать. 

## Принцип работы бота
### Получение обновлений
Бот получает обновления посредством get-запроса в api телеграмма, в котором можно указать таймаут сообщения. Запрос висит до конца таймаута либо до апдейта. В любом из этих исходов отправляется новый запрос.
Параллельно с этим, если апдейт все же был, он обрабатывается по следующему принципу:
1. Определяется тип апдейта
2. Если бот был добавлен в новый форум с правами на изменение тем, он создает ветки для каждого типа сообщений. Полученные данные об успешности добавления веток в форум несут в себе информацию об айди ветки, которая записывается в базу данных вместе с айди чата и типом файлов, для которых ветка предназначена
3. Иначе если было получено сообщение от пользователя, оно отправляется в специальную ветку, относящуюся к типу сообщения и которая была получена благодаря типу сообщения

## Перспективы развития
- Добавление возможности конфигурации бота, включая выбор веток, куда необходимо пересылать тот или иной тип сообщений
- Убрать возможность отправки сообщений в ветки бота, кроме мусорки.
- Дальнейшее дополнение функционала бота

